import cv2, socket, struct, pickle

# Create Socket for the connection 
serverSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM);


serverAddress = ('', 10000);
serverSocket.bind(serverAddress);
serverSocket.listen();






# Accept connections
clientSocket, clientAddress = serverSocket .accept();


# Camera
cap = cv2.VideoCapture(0);


while True:

    # Frames
    ret, frame = cap.read();

    
    try:    
        # Convert frame to binary
        frame_data = pickle.dumps(frame);
        

        # Send binary data length
        length = struct.pack('!I', len(frame_data));


        # Send binay data
        clientSocket.sendall(length);
        clientSocket.sendall(frame_data);

    except Exception as e:
        break


clientSocket.close();
serverSocket .close();
cap.release();

