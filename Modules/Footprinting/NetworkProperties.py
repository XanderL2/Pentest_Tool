import re, subprocess; 

def NetworkProperties():


    ifconfig = subprocess.run(["sudo","ifconfig", "wlan0"], capture_output=True, text=True).stdout;
    ifconfig = re.findall(r"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d+", ifconfig);



    #Capturamos la salida estandar de el comando ejecutandolo como subproceso
    route  = subprocess.run(["ip","route"], capture_output=True, text=True).stdout;
    route = re.findall(r"via\s+([\d.]+)", route);
    


    #Extraemos los 255s de la mascara de red y pasamos esa longitud a CIDR
    netmaskLength = len(re.findall(r"\d{3}", ifconfig[1]))



    if(netmaskLength == 1): netmaskLength = "/8";
    if (netmaskLength == 2): netmaskLength = "/16";
    if(netmaskLength == 3): netmaskLength= "/24";
        



    
    networkDeviceInfo = {
                "ip": ifconfig[0],
                "netmask": ifconfig[1],
                "netmaskCIDR": netmaskLength,
                "broadcast": ifconfig[2],
                "gateway": route[0],
                #El metodo sub permite reemplazar valores en una cadena
                "min_range": re.sub(r"\.\d+$", ".0", ifconfig[0]),
            } 



    return networkDeviceInfo;   